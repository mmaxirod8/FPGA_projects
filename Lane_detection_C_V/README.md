# üõ£Ô∏è  **Detecci√≥n de Carriles en FPGA (Cyclone V)**

This directory contains the hardware implementation of a Lane Detection algorithm using image processing filters.

## üìÇ Folder Content

* **`VHD Files/`**: Source code in VHDL (filtering, memory and control modules).
* **`C files/`**: C scripts (`bmp2sim`, `sim2bmp`) to convert BMP images to text and vice versa (necessary for simulation).
* **`Images/`**: Test images (roads) and visual results.
* **`Input and Output images txt/`**: Generated text files that represent the pixels for the simulation.

## üöÄ How to use this project

1. First, we select the image to work with (input image [stimuli]). Using the C code `fixed-point`, we obtain our output image (output image [reference]) where Lane detection was applied.
2. Next, since VHDL cannot read the BMP format of the images from the previous step, we can convert them into text files (`.txt`) using the BMP files (in this case, `bmp2sim.exe`). Each pixel in the image is represented using RGB, so this text file is quite large.
3. Then there are the VHDL files containing the `testbench` and `design` sections. These, along with the `.txt` files from the previous step, can be integrated and used in `ModelSim` (VHDL Simulator). This results in a `.txt` file.
4. And finally, to see the results in an image, we use the BMP file `sim2bmp.exe` to convert the `.txt` output of ModelSim to a viewable `.bmp` image.

## ‚ö° Desing Flow
<img width="1770" height="729" alt="Design flow Lane detection" src="https://github.com/user-attachments/assets/44bf5162-2353-4b90-9c55-0bc82e8e3f2d" />

## üõ†Ô∏è Processing Tools (a.exe)

The `a.exe` file included in the root of this folder is the image processing engine for the simulation.

### What exactly does it do?
Because hardware simulators like ModelSim cannot directly process complex binary files like `.bmp`, this executable performs two critical functions:
1. **Pre-processing Mode:** Reads an image from the `/Images` folder and converts it into a hexadecimal data stream in a `.txt` file. This file is what the VHDL Testbench "reads" as if it were camera input.

2. **Post-processing Mode:** Takes the output `.txt` file generated by the simulation (containing the pixels processed by the Sobel/Lane Detection filter) and reconstructs it into a `.bmp` image for visual validation.

### Technical notes
* **Compilation:** It was compiled using GCC under the **Cygwin** environment.
* **Dependencies:** To run on Windows, it requires that the path has access to `cygwin1.dll`. If you have problems running it, it is recommended to recompile the files in `C files/` using your local compiler (MinGW, Visual Studio, etc.).
